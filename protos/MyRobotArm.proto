#VRML_SIM R2023b utf8
PROTO MyRobotArm [
  field SFVec3f translation 0 0 0
  field SFRotation rotation 0 1 0 0
  field SFString controller "robot_controller"
]
{
  Robot {
    translation IS translation
    rotation IS rotation
    controller IS controller

    children [
      # Base (DOF 1 - Yaw)
      HingeJoint {
        jointParameters HingeJointParameters {
          axis 0 1 0
          anchor 0 0 0
        }
        device [
          RotationalMotor { name "base_motor" maxVelocity 3.0 },
          PositionSensor { name "base_sensor" }
        ]
        endPoint Solid {
          translation 0 0 0
          children [
            Shape {
              appearance PBRAppearance { baseColor 0.3 0.3 0.3 }
              geometry Cylinder { height 0.05 radius 0.05 }
            }
            # Telescopic Arm (DOF 2 - Prismatic)
            LinearMotor {
              name "extend_motor"
              maxVelocity 0.02
            }
            Solid {
              translation 0 0.05 0
              children [
                Shape {
                  appearance PBRAppearance { baseColor 0.6 0.6 0.6 }
                  geometry Box { size 0.05 0.2 0.05 }
                }
                # Shoulder (DOF 3 - Pitch)
                HingeJoint {
                  jointParameters HingeJointParameters {
                    axis 1 0 0
                    anchor 0 0.1 0
                  }
                  device [
                    RotationalMotor { name "shoulder_motor" maxVelocity 2.0 },
                    PositionSensor { name "shoulder_sensor" }
                  ]
                  endPoint Solid {
                    translation 0 0.1 0
                    children [
                      Shape {
                        appearance PBRAppearance { baseColor 0.5 0.5 0.8 }
                        geometry Box { size 0.05 0.3 0.05 }
                      }
                      # Wrist Pitch (DOF 4)
                      HingeJoint {
                        jointParameters HingeJointParameters {
                          axis 1 0 0
                          anchor 0 0.15 0
                        }
                        device [
                          RotationalMotor { name "wrist_pitch_motor" maxVelocity 3.0 },
                          PositionSensor { name "wrist_pitch_sensor" }
                        ]
                        endPoint Solid {
                          translation 0 0.15 0
                          children [
                            Shape {
                              appearance PBRAppearance { baseColor 0.8 0.5 0.5 }
                              geometry Box { size 0.04 0.15 0.04 }
                            }
                            # Wrist Roll (DOF 5)
                            HingeJoint {
                              jointParameters HingeJointParameters {
                                axis 0 0 1
                                anchor 0 0.1 0
                              }
                              device [
                                RotationalMotor { name "wrist_roll_motor" maxVelocity 3.0 },
                                PositionSensor { name "wrist_roll_sensor" }
                              ]
                              endPoint Solid {
                                translation 0 0.1 0
                                children [
                                  Shape {
                                    appearance PBRAppearance { baseColor 0.8 0.8 0.8 }
                                    geometry Cylinder { height 0.1 radius 0.015 }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          ]
        }
      }
    ]
  }
}
